From ec463d67fa20962f218ad6bd299d71350c300d91 Feb 03 00:00:00 2001
From: Vadym Omelchuk <vomelchuk@maxlinear.com>
Date: Tue, 03 Feb 2020 15:16:41 +0000
Subject: RDKB-34150 : Porting systemd and busybox to XB6 Y3.1
Source: Intel
License: GPLV2
Upstream-Status: Pending
Reason for change: Bring puma-oss and puma-oss-ported to XB6
Test procedure: Build and verify.
Risk: Low
Signed-off-by: Vadym Omelchuk <vomelchuk@maxlinear.com>
Index: bash-3.2.57/variables.c
===================================================================
--- bash-3.2.57.orig/variables.c
+++ bash-3.2.57/variables.c
@@ -426,7 +426,11 @@ initialize_shell_variables (env, privmod
 #endif
       set_if_not ("PS2", secondary_prompt);
     }
-  set_if_not ("PS4", "+ ");
+
+  if (current_user.euid == 0)
+    bind_variable ("PS4", "+ ", 0);
+  else
+    set_if_not ("PS4", "+ ");
 
   /* Don't allow IFS to be imported from the environment. */
   temp_var = bind_variable ("IFS", " \t\n", 0);

